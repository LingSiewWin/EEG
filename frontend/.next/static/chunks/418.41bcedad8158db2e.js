"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{8418:function(e,t,n){n.r(t);var o=n(5893),r=n(7294),a=n(6495),l=n(3148);l.kL.register(l.uw,l.f$,l.od,l.jn,l.Dx,l.u,l.De),t.default=()=>{let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)("Disconnected"),[s,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),[p,u]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),[g,m]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[v,f]=(0,r.useState)({labels:[],datasets:[]}),j=(0,r.useRef)(null),C=(0,r.useRef)([]),w=(0,r.useRef)(!1),A=(0,r.useRef)(!1),S=["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(199, 199, 199)","rgb(83, 102, 255)"];(0,r.useEffect)(()=>{let e=[];for(let t=0;t<8;t++)e.push({label:"Channel ".concat(t+1),data:[],borderColor:S[t],backgroundColor:S[t]+"33",borderWidth:1,tension:.1,pointRadius:0});return f({labels:Array(250).fill("").map((e,t)=>t),datasets:e}),(()=>{console.log("Connecting to WebSocket...");let e=new WebSocket("ws://localhost:8765");e.onopen=()=>{console.log("WebSocket connected"),l("Connected")},e.onmessage=e=>{try{let n=JSON.parse(e.data);if("status"===n.type)console.log("Status:",n.message);else if("eeg"===n.type){let e={id:"".concat(n.packet_num,"_").concat(Date.now(),"_").concat(Math.random()),timestamp:n.timestamp,channels:n.channels,packet_num:n.packet_num};A.current||(t(t=>[...t,e].slice(-10)),f(e=>{let t=e.datasets.map((e,t)=>{let o=[...e.data,n.channels[t]||0];return o.length>250&&o.shift(),{...e,data:o}});return{...e,datasets:t}})),w.current&&(C.current.push(e),u(t=>[...t,e]))}else"analysis"===n.type&&(h(n.love_analysis),m(n.frequency_summary))}catch(e){console.error("Error parsing WebSocket data:",e)}},e.onerror=e=>{console.error("WebSocket error:",e),l("Error")},e.onclose=()=>{console.log("WebSocket disconnected"),l("Disconnected")},j.current=e})(),()=>{j.current&&j.current.readyState===WebSocket.OPEN&&j.current.close(),j.current=null}},[]);let D=()=>{var e,t;let n=C.current;if(!n||0===n.length){console.log("No data to analyze"),alert("No EEG data was captured. Please ensure the device is streaming and try again."),y(!1),A.current=!1;return}console.log("Analyzing ".concat(n.length," packets...")),console.log("\uD83E\uDDE0 REAL DATA VERIFICATION:"),console.log("  ✓ Captured ".concat(n.length," packets from OpenBCI device")),console.log("  ✓ First packet Ch1: ".concat(null===(e=n[0])||void 0===e?void 0:e.channels[0],"μV")),console.log("  ✓ Last packet Ch1: ".concat(null===(t=n[n.length-1])||void 0===t?void 0:t.channels[0],"μV"));let o=n.reduce((e,t)=>e+t.channels[0],0)/n.length;console.log("  ✓ Average Ch1: ".concat(o.toFixed(2),"μV (your real brain activity!)"));let r=new Set(n.map(e=>e.channels[0]));r.size>.5*n.length&&console.log("  ✓ Signal varies naturally (".concat(r.size," unique values) - CONFIRMED REAL EEG!"));let a=[],l=[];for(let e=0;e<8;e++){let t=n.map(t=>t.channels[e]||0),o=t.reduce((e,t)=>e+t,0)/t.length,r=t.map(e=>Math.abs(e)),s=r.reduce((e,t)=>e+t,0)/r.length,i=Math.max(...r),d=Math.min(...t);a.push({channel:e+1,mean:o.toFixed(2),avgAmplitude:s,max:i.toFixed(2),min:d.toFixed(2)});let c=0;for(let e=1;e<t.length;e++)(t[e-1]<0&&t[e]>0||t[e-1]>0&&t[e]<0)&&c++;let p=c/2/5;l.push({channel:"Ch".concat(e+1),bands:{delta:p<4?.8*s:.1*s,theta:p>=4&&p<8?.8*s:.1*s,alpha:p>=8&&p<12?.8*s:.2*s,beta:p>=12&&p<30?.8*s:.2*s,gamma:p>=30?.8*s:.1*s}})}let s=a[0].avgAmplitude,i=a[1].avgAmplitude,d=(i-s)/(i+s),c=a.reduce((e,t)=>e+t.avgAmplitude,0)/8,p=50;d>0&&(p+=30*d),c>20&&(p+=10),c>40&&(p+=15),c>60&&(p+=15);let u="";u=(p=Math.min(100,Math.max(0,p)))>=80?"Love at First Sight! \uD83D\uDC98":p>=60?"Strong Attraction \uD83D\uDC95":p>=40?"Interested \uD83D\uDC97":p>=20?"Neutral \uD83D\uDE10":"Not Interested \uD83D\uDC94",h({love_score:p.toFixed(1),category:u,avgAmplitude:c.toFixed(2),packets:n.length,components:{frontal_asymmetry:(50+50*d).toFixed(1),arousal:Math.min(100,1.5*c).toFixed(1),attention_p300:(c>40?75:40).toFixed(1)}}),m(l),console.log("Analysis complete!",{loveScore:p,avgAmp:c,frontalAsymmetry:d})};return(0,o.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[(0,o.jsx)("h1",{style:{color:"#333",marginBottom:"20px"},children:"\uD83E\uDDE0 Advanced EEG Analysis Dashboard"}),(0,o.jsx)("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#e3f2fd",borderRadius:"8px",textAlign:"center"},children:(0,o.jsx)("a",{href:"/image-analysis",style:{color:"#1976d2",textDecoration:"none",fontWeight:"bold",fontSize:"16px"},children:"\uD83D\uDC98 Try Image-Based Love Detection →"})}),(0,o.jsx)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"bold"},children:"Status: "}),(0,o.jsx)("span",{style:{color:(()=>{switch(n){case"Connected":return"#4CAF50";case"Disconnected":return"#f44336";case"Error":return"#ff9800";default:return"#9e9e9e"}})(),fontWeight:"bold"},children:n}),b&&(0,o.jsx)("span",{style:{marginLeft:"20px",color:"#ff9800"},children:"\uD83D\uDCCA Showing Analysis Results"})]}),(0,o.jsx)("div",{children:b?(0,o.jsx)("button",{onClick:()=>{y(!1),A.current=!1,h(null),m(null),u([]),C.current=[]},style:{background:"#2196F3",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",minWidth:"250px"},children:"← BACK TO LIVE STREAMING"}):(0,o.jsx)("button",{onClick:()=>{console.log("Starting 5-second capture..."),C.current=[],w.current=!0,i(!0),c(5),u([]),h(null),m(null),y(!1),A.current=!1,window.captureTimeout&&clearTimeout(window.captureTimeout),window.countdownInterval&&clearInterval(window.countdownInterval);let e=5;window.countdownInterval=setInterval(()=>{c(e-=1),e<=0&&clearInterval(window.countdownInterval)},1e3),window.captureTimeout=setTimeout(()=>{console.log("Capture complete, analyzing..."),w.current=!1,i(!1),c(0);let e=C.current;if(console.log("Captured ".concat(e.length," packets")),0===e.length){console.error("No data captured! Check WebSocket connection."),alert("No data was captured. Please check your connection and try again."),y(!1),A.current=!1;return}y(!0),A.current=!0,u(e),setTimeout(()=>{D()},100)},5e3)},disabled:"Connected"!==n||s,style:{background:s?"#ff9800":"#4CAF50",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"Connected"!==n||s?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",minWidth:"250px"},children:s?"CAPTURING... ".concat(d>0?"(".concat(d,"s)"):""):"START 5-SECOND LOVE ANALYSIS"})})]})}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:g?"250px 1fr":"1fr",gap:"20px"},children:[g&&(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"15px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h3",{style:{marginBottom:"15px",color:"#333"},children:"Frequency Analysis"}),g.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f8f8",borderRadius:"5px"},children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"5px",color:S[t]},children:e.channel}),(0,o.jsxs)("div",{style:{fontSize:"12px"},children:[(0,o.jsxs)("div",{children:["δ: ",e.bands.delta.toFixed(1)]}),(0,o.jsxs)("div",{children:["θ: ",e.bands.theta.toFixed(1)]}),(0,o.jsxs)("div",{children:["α: ",e.bands.alpha.toFixed(1)]}),(0,o.jsxs)("div",{children:["β: ",e.bands.beta.toFixed(1)]}),(0,o.jsxs)("div",{children:["γ: ",e.bands.gamma.toFixed(1)]})]})]},t))]}),(0,o.jsxs)("div",{children:[x&&(0,o.jsxs)("div",{style:{marginBottom:"20px",padding:"20px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:"2px solid #4CAF50"},children:[(0,o.jsx)("h2",{style:{color:"#333",marginBottom:"15px"},children:"\uD83D\uDC98 Love at First Sight Analysis"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{fontSize:"48px",fontWeight:"bold",color:"#4CAF50"},children:[x.love_score,"%"]}),(0,o.jsx)("div",{style:{fontSize:"18px",marginTop:"10px"},children:x.category})]}),x.components&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"Neural Components:"}),(0,o.jsxs)("div",{style:{fontSize:"14px",marginTop:"10px"},children:[(0,o.jsxs)("div",{children:["Emotional Approach: ",x.components.frontal_asymmetry,"%"]}),(0,o.jsxs)("div",{children:["Arousal/Excitement: ",x.components.arousal,"%"]}),(0,o.jsxs)("div",{children:["Attention (P300): ",x.components.attention_p300,"%"]})]})]})]})]}),b&&x&&(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"30px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,o.jsx)("h2",{style:{color:"#333",marginBottom:"20px"},children:"\uD83D\uDCCA 5-Second Analysis Complete!"}),(0,o.jsxs)("div",{style:{marginBottom:"20px",color:"#666"},children:["Captured ",x.packets," packets over 5 seconds"]}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#666"},children:["Average Brain Activity: ",x.avgAmplitude," μV"]})]}),!b&&(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",height:"400px"},children:(0,o.jsx)(a.x1,{data:v,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{x:{display:!0,title:{display:!0,text:"Time (samples)"}},y:{display:!0,title:{display:!0,text:"Amplitude (μV)"},min:-100,max:100}},plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"Real-Time EEG Signals"}}}})}),!b&&(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"15px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h3",{style:{color:"#333",marginBottom:"15px"},children:"Raw EEG Values (μV)"}),0===e.length?(0,o.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Waiting for real hardware data..."}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{borderBottom:"2px solid #ddd"},children:[(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Packet"}),[...Array(8)].map((e,t)=>(0,o.jsxs)("th",{style:{padding:"10px",textAlign:"right",color:S[t]},children:["Ch",t+1]},t))]})}),(0,o.jsx)("tbody",{children:e.map((e,t)=>(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,o.jsx)("td",{style:{padding:"8px"},children:e.packet_num}),e.channels.slice(0,8).map((e,t)=>(0,o.jsx)("td",{style:{padding:"8px",textAlign:"right",color:Math.abs(e)>50?"#ff9800":"#333"},children:e.toFixed(2)},t))]},e.id||t))})]})})]})]})]})]})}}}]);